<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéØ Truth or Dare - Deluxe Wheel</title>

<style>
body {
  background: radial-gradient(circle at center, #1e1b4b, #0f172a);
  font-family: "Poppins", sans-serif;
  color: #fff;
  margin: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
h1 { margin-bottom: 10px; }

.wheel-container {
  display: flex;
  gap: 50px;
  flex-wrap: wrap;
  justify-content: center;
}

.wheel-wrapper {
  position: relative;
}

canvas {
  border-radius: 50%;
  background: #111;
  box-shadow: 0 0 18px rgba(255,255,255,0.15);
}

.arrow {
  position: absolute;
  top: 125px;
  right: -30px;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  border-top: 14px solid transparent;
  border-bottom: 14px solid transparent;
  border-right: 28px solid #facc15;
}

.buttons {
  margin-top: 25px;
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

button {
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  background: #facc15;
  color: #111;
  font-weight: 600;
  cursor: pointer;
}
button:hover { background: #fde047; }

#result {
  margin-top: 18px;
  font-size: 18px;
  text-align: center;
  max-width: 90%;
}

.note {
  font-size: 13px;
  opacity: 0.8;
  margin-top: 6px;
  text-align: center;
}
</style>
</head>

<body>
<h1>üéØ V√≤ng quay Truth or Dare üé°</h1>

<div class="wheel-container">

  <!-- V√≤ng 1 -->
  <div class="wheel-wrapper">
    <div class="arrow"></div>
    <canvas id="wheel1" width="250" height="250"></canvas>
    <p class="note">V√≤ng 1: Truth / Dare</p>
  </div>

  <!-- V√≤ng 2 -->
  <div class="wheel-wrapper">
    <div class="arrow"></div>
    <canvas id="wheel2" width="250" height="250"></canvas>
    <p class="note">V√≤ng 2: N·ªôi dung</p>
  </div>

</div>

<div class="buttons">
  <button id="spin1">üé° Quay v√≤ng 1</button>
  <button id="spin2">üé≤ Quay v√≤ng 2</button>
</div>

<div id="result"></div>

<script>
// ===== DANH S√ÅCH =====
const truthItems = [
  "K√Ω ·ª©c tu·ªïi th∆° n√†o khi·∫øn b·∫°n c∆∞·ªùi m√£i?",
  "ƒêi·ªÅu g√¨ khi·∫øn b·∫°n t·ª± h√†o nh·∫•t v·ªÅ b·∫£n th√¢n?",
  "B·∫°n s·ª£ m·∫•t ƒëi·ªÅu g√¨ nh·∫•t?",
  "Ng∆∞·ªùi b·∫°n tin t∆∞·ªüng nh·∫•t l√† ai?",
  "B·∫°n h·∫°nh ph√∫c nh·∫•t khi n√†o?",
  "B·∫°n t·ª´ng kh√≥c v√¨ chuy·ªán g√¨ g·∫ßn ƒë√¢y?",
  "ƒêi·ªÅu b√≠ m·∫≠t nh·ªè b·∫°n ch∆∞a t·ª´ng n√≥i?",
  "B·∫°n mong ∆∞·ªõc ƒëi·ªÅu g√¨ trong 5 nƒÉm t·ªõi?"
];

const dareItems = [
  "C∆∞·ªùi to 10 gi√¢y kh√¥ng ƒë∆∞·ª£c ng·ª´ng",
  "N√≥i m·ªôt l·ªùi khen cho ng∆∞·ªùi b√™n c·∫°nh",
  "Gi·∫£ gi·ªçng robot trong 15 gi√¢y",
  "T·∫°o d√°ng ch·ª•p ·∫£nh ng·∫ßu nh·∫•t",
  "H√°t 1 c√¢u b√†i h√°t b·∫°n th√≠ch",
  "Nh·∫£y t·∫°i ch·ªó 10 l·∫ßn",
  "G·ª≠i icon ‚ù§Ô∏è cho ng∆∞·ªùi b·∫°n ch·ªçn",
  "K·ªÉ m·ªôt chuy·ªán vui v·ªÅ b·∫£n th√¢n"
];

// ===== SETUP =====
const wheel1 = document.getElementById("wheel1");
const wheel2 = document.getElementById("wheel2");
const ctx1 = wheel1.getContext("2d");
const ctx2 = wheel2.getContext("2d");
const result = document.getElementById("result");

let choice1 = null;
let spinning = false;

// ===== V·∫º V√íNG =====
function drawWheel(ctx, items, colors) {
  ctx.clearRect(0,0,250,250);
  const arc = (2*Math.PI)/items.length;
  for(let i=0;i<items.length;i++){
    ctx.beginPath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.moveTo(125,125);
    ctx.arc(125,125,120,i*arc,(i+1)*arc);
    ctx.fill();

    ctx.save();
    ctx.translate(125,125);
    ctx.rotate(i*arc + arc/2);
    ctx.textAlign="right";
    ctx.fillStyle="#fff";
    ctx.font="bold 12px Poppins";
    ctx.fillText(items[i],110,5);
    ctx.restore();
  }
}

// ===== QUAY =====
function spinWheel(canvas, items, colors) {
  return new Promise(resolve=>{
    const ctx = canvas.getContext("2d");
    const arc = (2*Math.PI)/items.length;
    const spins = 6 + Math.random()*2;
    const duration = 3500;
    const start = performance.now();

    function animate(t){
      const p = Math.min((t-start)/duration,1);
      const ease = 1-Math.pow(1-p,3);
      const angle = spins*2*Math.PI*ease;

      ctx.clearRect(0,0,250,250);
      for(let i=0;i<items.length;i++){
        ctx.beginPath();
        ctx.fillStyle = colors[i % colors.length];
        ctx.moveTo(125,125);
        ctx.arc(125,125,120,i*arc+angle,(i+1)*arc+angle);
        ctx.fill();

        ctx.save();
        ctx.translate(125,125);
        ctx.rotate(i*arc+angle+arc/2);
        ctx.textAlign="right";
        ctx.fillStyle="#fff";
        ctx.font="bold 12px Poppins";
        ctx.fillText(items[i],110,5);
        ctx.restore();
      }

      if(p<1) requestAnimationFrame(animate);
      else {
        const index = Math.floor(
          (items.length - (angle%(2*Math.PI))/(2*Math.PI)*items.length) % items.length
        );
        resolve(items[index]);
      }
    }
    requestAnimationFrame(animate);
  });
}

// ===== INIT =====
drawWheel(ctx1, ["Truth","Dare"], ["#3b82f6","#ef4444"]);
drawWheel(ctx2, truthItems, ["#22c55e","#16a34a"]);

// ===== BUTTONS =====
spin1.onclick = async ()=>{
  if(spinning) return;
  spinning=true;
  result.textContent="ƒêang quay v√≤ng 1...";
  choice1 = await spinWheel(wheel1,["Truth","Dare"],["#3b82f6","#ef4444"]);
  result.textContent="üëâ K·∫øt qu·∫£: "+choice1;
  drawWheel(ctx2, choice1==="Truth"?truthItems:dareItems,
    choice1==="Truth"?["#22c55e","#16a34a"]:["#f97316","#ef4444"]);
  spinning=false;
};

spin2.onclick = async ()=>{
  if(spinning || !choice1) return;
  spinning=true;
  const list = choice1==="Truth"?truthItems:dareItems;
  const colors = choice1==="Truth"?["#22c55e","#16a34a"]:["#f97316","#ef4444"];
  const r = await spinWheel(wheel2,list,colors);
  result.textContent = (choice1==="Truth"?"üí¨ Truth: ":"üî• Dare: ") + r;
  spinning=false;
};

// Ph√≠m ‚Üí
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowRight") spin1.click();
});
</script>
</body>
</html>

