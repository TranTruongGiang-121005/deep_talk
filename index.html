
<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéØ Truth or Dare - Deluxe Wheel</title>
<style>
  body {
    background: radial-gradient(circle at center, #1e1b4b, #0f172a);
    font-family: "Poppins", sans-serif;
    color: #fff;
    text-align: center;
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  h1 { margin-bottom: 10px; }
  .wheel-container {
    display: flex;
    gap: 60px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .wheel-wrapper {
    position: relative;
  }
  canvas {
    border-radius: 50%;
    background: #111;
    box-shadow: 0 0 15px rgba(255,255,255,0.15);
  }
.arrow {
  position: absolute;
  top: 125px;                    /* ƒë√∫ng gi·ªØa h√¨nh tr√≤n (v√¨ radius = 125px) */
  right: -30px;                  /* n·∫±m ngo√†i m√©p ph·∫£i m·ªôt ch√∫t */
  transform: translateY(-50%);   /* cƒÉn gi·ªØa ch√≠nh x√°c theo chi·ªÅu d·ªçc */
  width: 0;
  height: 0;
  border-top: 14px solid transparent;
  border-bottom: 14px solid transparent;
  border-right: 28px solid #facc15; /* ƒë·∫ßu nh·ªçn h∆∞·ªõng sang tr√°i */
  filter: drop-shadow(0 0 4px #000);
}
  .buttons {
    margin-top: 25px;
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
  }
  button {
    padding: 12px 22px;
    border: none;
    border-radius: 10px;
    background: #facc15;
    color: #111;
    font-weight: 600;
    cursor: pointer;
    transition: 0.25s;
  }
  button:hover {
    background: #fde047;
  }
  #result {
    margin-top: 18px;
    font-size: 18px;
    font-weight: 500;
  }
  .note {
    font-size: 13px;
    opacity: 0.8;
    margin-top: 5px;
  }
</style>
</head>
<body>
<h1>üéØ V√≤ng quay Truth or Dare üé°</h1>

<div class="wheel-container">
  <div class="wheel-wrapper">
    <div class="arrow"></div>
    <canvas id="wheel1" width="250" height="250"></canvas>
    <p class="note">V√≤ng 1: Ch·ªçn Truth ho·∫∑c Dare<br>(‚Üí ƒë·ªÉ quay)</p>
  </div>
  <div class="wheel-wrapper">
    <div class="arrow"></div>
    <canvas id="wheel2" width="250" height="250"></canvas>
    <p class="note">V√≤ng 2: C√¢u h·ªèi ho·∫∑c th·ª≠ th√°ch<br>(‚Üì ƒë·ªÉ quay)</p>
  </div>
</div>

<div class="buttons">
  <button id="spin1">üé° Quay v√≤ng 1</button>
  <button id="spin2">üé≤ Quay v√≤ng 2</button>
</div>
<div id="result"></div>

<script>
// ======= D√ÅN DANH S√ÅCH C·ª¶A B·∫†N ·ªû ƒê√ÇY =======
const truthItems = [
"L·∫ßn g·∫ßn nh·∫•t b·∫°n mu·ªën h√¥n t√¥i ngay l·∫≠p t·ª©c l√† khi n√†o?, ho·∫∑c u·ªëng 2 ly.",
"M√¥ t·∫£ chi ti·∫øt m·ªôt n·ª• h√¥n l√Ω t∆∞·ªüng c·ªßa b·∫°n v·ªõi t√¥i, ho·∫∑c u·ªëng 3 ly.",
"B·∫°n mu·ªën t√¥i ch·∫°m v√†o ƒë√¢u nh·∫•t b√¢y gi·ªù?, ho·∫∑c u·ªëng 2 ly.",
"K·ªÉ m·ªôt t∆∞·ªüng t∆∞·ª£ng ‚Äún√≥ng‚Äù v·ªÅ ch√∫ng ta, ho·∫∑c u·ªëng 3 ly.",
"N·∫øu ph·∫£i ch·ªçn m·ªôt ch·ªó tr√™n c∆° th·ªÉ t√¥i ƒë·ªÉ h√¥n, b·∫°n ch·ªçn ƒë√¢u?, ho·∫∑c u·ªëng 3 ly.",
"B·∫°n th√≠ch t√¥i m·∫∑c g√¨ ƒë·ªÉ tr√¥ng sexy nh·∫•t?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n mu·ªën th·ª≠ t∆∞ th·∫ø √¥m/h√¥n n√†o ch∆∞a t·ª´ng th·ª≠?, ho·∫∑c u·ªëng 2 ly.",
"C√≥ ƒëi·ªÅu g√¨ b·∫°n mu·ªën t√¥i l√†m cho b·∫°n nh∆∞ng ch∆∞a d√°m n√≥i?, ho·∫∑c u·ªëng 2 ly.",
"L·∫ßn ƒë·∫ßu ti√™n b·∫°n th·∫•y t√¥i sexy l√† khi n√†o?, ho·∫∑c u·ªëng 3 ly.",
"B·∫°n t·ª´ng t∆∞·ªüng t∆∞·ª£ng ch√∫ng ta ·ªü m·ªôt t√¨nh hu·ªëng ‚Äún√≥ng‚Äù n∆°i ri√™ng t∆∞ ch∆∞a?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n c√≥ mu·ªën th·ª≠ h√¥n ‚Äúg·ª£i c·∫£m‚Äù ngay b√¢y gi·ªù kh√¥ng?, ho·∫∑c u·ªëng 2 ly.",
"M√¥ t·∫£ c·∫£m gi√°c khi b·∫°n √¥m t√¥i ch·∫∑t., ho·∫∑c u·ªëng 2 ly.",
"B·∫°n th√≠ch ki·ªÉu vu·ªët ve n√†o c·ªßa t√¥i nh·∫•t?, ho·∫∑c u·ªëng 2 ly.",
"K·ªÉ m·ªôt l·∫ßn b·∫°n t∆∞·ªüng t∆∞·ª£ng ch√∫ng ta g·∫ßn g≈©i nh∆∞ng ch∆∞a th·ª±c hi·ªán., ho·∫∑c u·ªëng 2 ly.",
"ƒêi·ªÅu b·∫°n mu·ªën th·ª≠ v·ªõi t√¥i nh∆∞ng ch∆∞a d√°m th·ª≠., ho·∫∑c u·ªëng 2 ly.",
"B·∫°n m·∫•t trinh ·ªü tu·ªïi n√†o?, ho·∫∑c u·ªëng 3 ly.",
"B·∫°n ƒë√£ ng·ªß v·ªõi bao nhi√™u ng∆∞·ªùi?, ho·∫∑c u·ªëng 3 ly.",
"N·ª• h√¥n t·ªìi t·ªá nh·∫•t c·ªßa b·∫°n l√† ai?, ho·∫∑c u·ªëng 2 ly.",
"Vai di·ªÖn k·ª≥ l·∫° nh·∫•t m√† b·∫°n t·ª´ng l√†m l√† g√¨?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n ƒë√£ bao gi·ªù b·ªã b·∫Øt qu·∫£ tang ch∆∞a? N·∫øu v·∫≠y, b·ªüi ai?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n ƒë√£ bao gi·ªù t·∫≠p h√¥n trong g∆∞∆°ng ch∆∞a?, ho·∫∑c u·ªëng 1 ly.",
"B·∫°n ƒë√£ t·ª´ng say nh·∫•t l√† g√¨?, ho·∫∑c u·ªëng 2 ly.",
"N·∫øu ph·∫£i quay l·∫°i v·ªõi ng∆∞·ªùi y√™u c≈©, b·∫°n s·∫Ω ch·ªçn ai, v√¨ sao?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n ƒë√£ bao gi·ªù chia tay ng∆∞·ªùi y√™u c≈© ngay tr∆∞·ªõc sinh nh·∫≠t c·ªßa h·ªç ƒë·ªÉ tr√°nh mua qu√† sinh nh·∫≠t cho h·ªç ch∆∞a, v√¨ sao?, ho·∫∑c u·ªëng 2 ly.",
"N∆°i k·ª≥ l·∫° nh·∫•t m√† b·∫°n ƒë√£ h√¥n, ƒë·ª• v·ªõi ai ƒë√≥ l√† g√¨?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n ƒë√£ bao gi·ªù h·∫πn h√≤ v·ªõi ai ƒë√≥ ch·ªâ v√¨ t√¨nh d·ª•c, v√¨ sao?, ho·∫∑c u·ªëng 2 ly.",
"B·∫°n ƒë√£ t·ª´ng g·ª≠i ·∫£nh kh·ªèa th√¢n ch∆∞a, v√¨ sao?, ho·∫∑c u·ªëng 2 ly.",
"G·ªçi t√™n m·ªôt ng∆∞·ªùi m√† b·∫°n h·ªëi h·∫≠n v√¨ ƒë√£ h√¥n., ho·∫∑c u·ªëng 2 ly.",
"K·ªÉ 1 b√≠ m·∫≠t n√†o b·∫°n ch∆∞a t·ª´ng n√≥i v·ªõi ai?, ho·∫∑c u·ªëng 3 ly.",
"ƒêo√°n m√†u s·∫Øc c·ªßa qu·∫ßn l√≥t c·ªßa ƒë·ªëi ph∆∞∆°ng l√† g√¨?, ho·∫∑c u·ªëng 2 ly."
]
const dareItems = [
"H√¥n ng∆∞·ªùi kia ·ªü c·ªï trong 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"H√¥n ng∆∞·ªùi kia ·ªü vai 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"Nh·∫Øm m·∫Øt, ƒë·ªÉ ng∆∞·ªùi kia h√¥n b·∫•t c·ª© ƒë√¢u trong 60 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
"H√¥n tay ng∆∞·ªùi kia 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"√îm ng∆∞·ªùi kia th·∫≠t ch·∫∑t trong 60 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
"‚ÄúMini dance‚Äù sexy 20 gi√¢y tr∆∞·ªõc ng∆∞·ªùi kia, ho·∫∑c u·ªëng 3 ly.",
"√îm eo ho·∫∑c l∆∞ng ng∆∞·ªùi kia 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"C·ªüi m·ªôt l·ªõp √°o ho·∫∑c swap 1 m√≥n ƒë·ªì v·ªõi ng∆∞·ªùi kia, ho·∫∑c u·ªëng 2 ly.",
"H√¥n ‚Äúmini kiss‚Äù li√™n ti·∫øp 10 l·∫ßn, ho·∫∑c u·ªëng 2 ly.",
"Massage l∆∞ng ho·∫∑c ch√¢n ng∆∞·ªùi kia 30 gi√¢y , ho·∫∑c u·ªëng 3 ly.",
"C·∫£ hai c√πng u·ªëng 2 ly v√† h√¥n nhau 36 gi√¢y.",
"H√¥n b·∫•t k·ª≥ ch·ªó n√†o ƒë∆∞·ª£c ch·ªçn ng·∫´u nhi√™n 36 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"Cuddle + h√¥n li√™n t·ª•c 30 gi√¢y, ho·∫∑c c·∫£ 2 c√πng u·ªëng 1 ly.",
"Cho t√¥i c√∫ b√≤ sexy nh·∫•t c·ªßa b·∫°n trong 18 gi√¢y, ho·∫∑c u·ªëng 4 ly.",
"Ng·ªìi tr√™n ƒë√πi t√¥i cho ƒë·∫øn khi h·∫øt tr√≤ ch∆°i, ho·∫∑c u·ªëng 3 ly.",
"ƒê·ªÉ t√¥i ch·∫°m v√†o v√πng nh·∫°y c·∫£m trong 30 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"ƒê·ªÉ t√¥i h√¥n b·∫•t c·ª© ƒë√¢u b·∫°n ch·ªçn trong 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"ƒê·ªÉ t√¥i vu·ªët ve b·∫•t c·ª© ƒë√¢u b·∫°n ch·ªçn trong 20 gi√¢y, ho·∫∑c u·ªëng 2 ly.",
"Th√¨ th·∫ßm v√†o tai ng∆∞·ªùi ƒë·ªëi di·ªán ƒëi·ªÅu g√¨ ƒë√≥ g·ª£i c·∫£m trong 30 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
"√îm ng∆∞·ªùi kia t·ª´ ph√≠a sau v√† h√¥n l√™n c·ªï h·ªç, ho·∫∑c u·ªëng 2 ly.",
"ƒê·∫∑t tay b·∫°n l√™n b·∫•t c·ª© ƒë√¢u c·ªßa ƒë·ªëi ph∆∞∆°ng trong 1 ph√∫t, ho·∫∑c u·ªëng 2 ly.",
"D√πng tay xoa b√≥p ƒë√πi ng∆∞·ªùi kia trong 20 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
"ƒê·ªÉ ng∆∞·ªùi kia h√¥n l√™n ng·ª±c b·∫°n trong 36 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
"ƒê·ªÉ ng∆∞·ªùi kia h√¥n l√™n b·ª•ng b·∫°n trong 18 gi√¢y, ho·∫∑c u·ªëng 3 ly.",
];
// ============================================

const wheel1 = document.getElementById("wheel1");
const wheel2 = document.getElementById("wheel2");
const ctx1 = wheel1.getContext("2d");
const ctx2 = wheel2.getContext("2d");
const result = document.getElementById("result");
const btn1 = document.getElementById("spin1");
const btn2 = document.getElementById("spin2");
let choice1 = null;
let spinning = false;

// Hi·ªáu ·ª©ng √¢m thanh "click click"
const clickSound = new Audio();
clickSound.src =
  "data:audio/mp3;base64,//uQxA..."; // √¢m thanh base64 ng·∫Øn, kh√¥ng c·∫ßn file ngo√†i
clickSound.volume = 0.3;

// V·∫Ω v√≤ng c∆° b·∫£n
function drawWheel(ctx, items, colors) {
  ctx.clearRect(0, 0, 250, 250);
  const n = items.length;
  const arc = (2 * Math.PI) / n;
  for (let i = 0; i < n; i++) {
    ctx.beginPath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.moveTo(125, 125);
    ctx.arc(125, 125, 120, i * arc, (i + 1) * arc);
    ctx.lineTo(125, 125);
    ctx.fill();

    ctx.save();
    ctx.translate(125, 125);
    ctx.rotate(i * arc + arc / 2);
    ctx.fillStyle = "#fff";
    ctx.font = "bold 14px Poppins";
    ctx.textAlign = "right";
    ctx.fillText(items[i], 110, 5);
    ctx.restore();
  }
}
drawWheel(ctx1, ["Truth", "Dare"], ["#3b82f6", "#ef4444"]);

// Quay b√°nh xe
function spinWheel(canvas, items) {
  return new Promise((resolve) => {
    const ctx = canvas.getContext("2d");
    const n = items.length;
    const arc = (2 * Math.PI) / n;
    let angle = 0;
    const spins = 6 + Math.random() * 2;
    const duration = 4000;
    const start = performance.now();

    function animate(now) {
      const elapsed = now - start;
      const progress = Math.min(elapsed / duration, 1);
      const ease = 1 - Math.pow(1 - progress, 3);
      angle = 2 * Math.PI * spins * ease;

      if (Math.random() < 0.25) {
        // click sound ng·∫´u nhi√™n nh·∫π
        clickSound.currentTime = 0;
        clickSound.play().catch(() => {});
      }

      ctx.clearRect(0, 0, 250, 250);
      for (let i = 0; i < n; i++) {
        ctx.beginPath();
        ctx.fillStyle = i % 2 ? "#8b5cf6" : "#06b6d4";
        ctx.moveTo(125, 125);
        ctx.arc(125, 125, 120, i * arc + angle, (i + 1) * arc + angle);
        ctx.lineTo(125, 125);
        ctx.fill();

        ctx.save();
        ctx.translate(125, 125);
        ctx.rotate(i * arc + angle + arc / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 13px Poppins";
        ctx.fillText(items[i], 110, 5);
        ctx.restore();
      }

      if (progress < 1) requestAnimationFrame(animate);
      else {
        // L·∫•y k·∫øt qu·∫£ theo g√≥c kim ch·ªâ l√™n tr√™n
        const finalAngle = angle % (2 * Math.PI);
        const index = Math.floor(
          (n - (finalAngle / (2 * Math.PI)) * n) % n
        );
        resolve(items[index]);
      }
    }
    requestAnimationFrame(animate);
  });
}

// N√∫t v√≤ng 1
btn1.onclick = async () => {
  if (spinning) return;
  spinning = true;
  result.textContent = "ƒêang quay v√≤ng 1...";
  choice1 = await spinWheel(wheel1, ["Truth", "Dare"]);
  result.textContent = "K·∫øt qu·∫£ v√≤ng 1: " + choice1;
  spinning = false;
};

// N√∫t v√≤ng 2
btn2.onclick = async () => {
  if (spinning) return;
  if (!choice1) {
    result.textContent = "H√£y quay v√≤ng 1 tr∆∞·ªõc!";
    return;
  }
  spinning = true;
  const items = choice1 === "Truth" ? truthItems : dareItems;
  drawWheel(ctx2, items, ["#f59e0b", "#10b981", "#ec4899", "#6366f1"]);
  result.textContent = "ƒêang quay v√≤ng 2...";
  const choice2 = await spinWheel(wheel2, items);
  result.textContent = `${choice1} ‚Üí ${choice2}`;
  spinning = false;
};

// ƒêi·ªÅu khi·ªÉn b·∫±ng ph√≠m
document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowRight") btn1.click();
  if (e.key === "ArrowDown") btn2.click();
});
</script>
</body>
</html>
